# test-for-work

Сервис предназначен для хранения заметок

Для запуска должны быть установлены зависимости: (`Postgres`, `redis`)

Для PG:
- БД: `testing`
- Схема: `testing`

Измените персональные данные, которые находятся в `.env` файле в корне проекта

## Start

- `npm i`
- `db-migrate up`
- `npm run dev`

## API

### Регистрация пользователя

PUT : http://127.0.0.1:8888/user

PARAMS :

- `login` - *string* - [**Обязательно**] - Логин пользователя
- `password` - *string* - [**Обязательно**] - Пароль пользователя

### Получение списка пользователей

GET : http://127.0.0.1:8888/user

PARAMS : 

- `login` - *string* - [**Опционально**] - Логин пользователя
- `userId` - *number* - [**Опционально**] - Идентификатор пользователя

### Аутентификация пользователя

POST : http://127.0.0.1:8888/user

PARAMS :

- `login` - *string* - [**Обязательно**] - Логин пользователя
- `password` - *string* - [**Обязательно**] - Пароль пользователя

### Получение списка заметок

GET : http://127.0.0.1:8888/note

PARAMS :

- `noteId` - *number* - [**Опционально**] - Идентификатор заметки
- `userId` - *number* - [**Опционально**] - Идентификатор пользователя

### Создание заметки

PUT : http://127.0.0.1:8888/note

PARAMS :

- `sharing` - *boolean* - [**Опционально**] - Видимость не авторизованным пользователям
- `text` - *string* - [**Обязательно**] - Текст записки

### Редактирование заметки

POST : http://127.0.0.1:8888/note

PARAMS :

- `noteId` - *number* - [**Обязательно**] - Идентификатор заметки
- `text` - *string* - [**Опционально**] - Текст записки
- `sharing` - *boolean* - [**Опционально**] - Видимость не авторизованным пользователям

### Удаление заметки

DELETE : http://127.0.0.1:8888/note

PARAMS :

- `noteId` - *number* - [**Обязательно**] - Идентификатор заметки


## Data

По умолчанию создано 3 пользователя для вашего удобства тестирования
```Json
[
  {
    "login": "a",
    "password": "aa"
  },
  {
    "login": "b",
    "password": "bb"
  },
  {
    "login": "c",
    "password": "cc"
  }
]
```

### Прочее

Коллекция Postman лежит в корне проекта (мог бы сделать с автотестами и переменными, но не хватило времени)

Для такой задачи не считаю нужным делать супер-пупер защиту, т.к. это просто демо.

По факту тут много минусов:

- Хранить пароль в `MD5` с солью
- Шифровать всю передачу файлов `HTTPS`
- Использовать 2-х факторный jwt (`accessToken`, `refreshToken`)
- Можно было не городить файлы в классах, т.к. не много методов используется в приложении. (это так сказать запас на будущее)
- Логировать вывод сообщение через например `winston` с экранированием полей, таких как `password`, `accessToken`
- Если делать полноценную регистрацию - то с подтверждением по смс или почте и тп. Данный пример регистрации очень прост
- На скорую руку невозможно сделать быстро и качественно сервис (как говорится: выберите 2 из 3 пунктов: быстро, качественно, красиво xD)
